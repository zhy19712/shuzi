<link rel="stylesheet" type="text/css" href="/static/admin/webupload/webuploader.css">
<link rel="stylesheet" type="text/css" href="/static/admin/webupload/style.css">
<link rel="stylesheet" href="/static/admin/css/zTreeStyle/zTreeStyle.css">
<link rel="stylesheet" href="/static/admin/css/jquery.dataTables.min.css">
<link rel="stylesheet" href="/static/admin/css/jedate.css">
<link rel="stylesheet" href="/static/admin/css/iconfont.css">
{include file="public/header" /}
<body>
    <style>
        .mycontent{
            width: 20%;
            height: 98%;
            display: inline-block;
            background-color: #fff;
            overflow-x: scroll;
            border-right: 1px solid #ccc;
        }
        .mycontent h2{
            font-size: 16px;
            border-bottom: 1px solid #ccc;
            margin: 0;
            padding: 10px 0;
            text-align: center;
        }
        .ztree li span.button.add {
            margin-left:2px;
            margin-right: -1px;
            background-position:-144px 0;
            vertical-align:top;
            *vertical-align:middle;
        }
        .wrapper {
            display: inline-block;
            width: 78%;
            vertical-align: top;
            padding: 0;
        }
        #path{
            line-height: 30px;
            font-weight: 700;
            border-bottom: 1px solid #ccc;
        }
    </style>

    <div id="mycontent" class="mycontent">
        <h2>法律标准分类</h2>
        <ul id="tree_container" class="ztree"></ul>
    </div>
    <div class="wrapper wrapper-content animated fadeInRight">
        <div class="ibox float-e-margins">
            <div class="ibox-content">
                <div class="row">
                    <div id="path">当前路径:</div>
                    <div id="table_info">
                        <div id="level">
                            <table id="tableItem" class="display" width="100%">

                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    {include file="public/footer" /}
    <script type="text/javascript" src="/static/admin/webupload/webuploader.min.js"></script>

    <script src="__JS__/jquery.ztree.all.js"></script>
    <script src="__JS__/jquery.dataTables.min.js"></script>
    <script src="__JS__/jquery.jedate.js"></script>
    <script src="__JS__/jquery.dataTables.min.js"></script>
    <script src="__JS__/pdf.js"></script>
    <script src="__JS__/mypdf.js"></script>
    <script>
        //左侧菜单
        var node = [
            {name:"法律法规"},
            {name: "标准规范", children: [
                {name: "国家标准"},
                {name: "安监行业标准"},
                {name: "水利水电行业标准"},
                {name: "建筑行业标准"}
             ]}
        ]
        var setting = {
            view:{
                addHoverDom: addHoverDom,
                removeHoverDom: removeHoverDom,
            },
            edit:{
                enable: true,
                showRemoveBtn :true,
                showRenameBtn :true,
                removeTitle :"删除",
                renameTitle :"修改",
                drag:{
                    isMove:true,
                    prev:true,
                    next:true,
                    inner:true
                }
            },
            data:{
                keep: {
                    leaf : true,
                    parent : true
                },
                simpleData : {
                    enable:true,
                    idkey: "id",
                    pIdKey: "pId"
                }
            }
        };
        var newCount = 1;
        function addHoverDom(treeId, treeNode) {
            var sObj = $("#" + treeNode.tId + "_span");
            console.log(sObj);
            if (treeNode.editNameFlag || $("#addBtn_"+treeNode.tId).length>0) return;
            var addStr = "<span class='button add' id='addBtn_" + treeNode.tId
                + "' title='add node' onfocus='this.blur();'></span>";
            sObj.after(addStr);
            var btn = $("#addBtn_"+treeNode.tId);

            if (btn) btn.bind("click", function(){
                var zTree = $.fn.zTree.getZTreeObj("tree_container");
                zTree.addNodes(treeNode, {id:(100 + newCount), pId:treeNode.id, name:"new node" + (newCount++)});
                return false;
            });
        };
        function removeHoverDom(treeId, treeNode) {
            $("#addBtn_"+treeNode.tId).unbind().remove();
        };
        zTreeObj = $.fn.zTree.init($("#tree_container"), setting,node).expandAll(true);


        //右侧表格
        var dataSet = [
            ["1","666","规范","2014年12月1日","适用","admin","2017年12月12日","无","修改"],
            ["2","666","规范","2014年12月1日","适用","admin","2017年12月12日","无","修改"],
            ["3","666","规范","2014年12月1日","适用","admin","2017年12月12日","无","修改"],
            ["4","666","规范","2014年12月1日","适用","admin","2017年12月12日","无","修改"],
            ["5","666","规范","2014年12月1日","适用","admin","2017年12月12日","无","修改"],
            ["6","666","规范","2014年12月1日","适用","admin","2017年12月12日","无","修改"],
            ["7","666","规范","2014年12月1日","适用","admin","2017年12月12日","无","修改"],
            ["8","666","规范","2014年12月1日","适用","admin","2017年12月12日","无","修改"],
            ["9","666","规范","2014年12月1日","适用","admin","2017年12月12日","无","修改"],
            ["10","666","规范","2014年12月1日","适用","admin","2017年12月12日","无","修改"],
            ["11","666","规范","2014年12月1日","适用","admin","2017年12月12日","无","修改"],
            ["12","666","规范","2014年12月1日","适用","admin","2017年12月12日","无","修改"],
            ["13","666","规范","2014年12月1日","适用","admin","2017年12月12日","无","修改"],
            ["14","666","规范","2014年12月1日","适用","admin","2017年12月12日","无","修改"],
            ["15","666","规范","2014年12月1日","适用","admin","2017年12月12日","无","修改"],
            ["16","666","规范","2014年12月1日","适用","admin","2017年12月12日","无","修改"],
            ["17","666","规范","2014年12月1日","适用","admin","2017年12月12日","无","修改"]
        ];
        var columns = [
            {
                title:"序号",
            },
            {
                title:"标准号",
            },
            {
                title:"名称",
            },
            {
                title:"施行日期",
            },
            {
                title:"适用性评价",
            },
            {
                title:"识别人",
            },
            {
                title:"上传日期",
            },
            {
                title:"备注",
            },
            {
                title:"操作",
            },
        ]
        $('#tableItem').DataTable({
            data:dataSet,
            columns:columns,
            language: {
                "lengthMenu": "每页 _MENU_ 条记录",
                "zeroRecords": "没有找到记录",
                "info": "第 _PAGE_ 页 ( 总共 _PAGES_ 页 )",
                "infoEmpty": "无记录",
                "infoFiltered": "(从 _MAX_ 条记录过滤)",
                "search":"搜索",
                "paginate": {
                    "first": "第一页",
                    "last": "最后一页",
                    "previous": "上一页",
                    "next": "下一页"
                },
                dom: 'Bfrtip',
                buttons: ['colvis', 'excel', 'print']
            }
        });
    </script>
</body>
</html>