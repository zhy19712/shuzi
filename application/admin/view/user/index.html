{include file="public/header" /}
<link rel="stylesheet" href="/static/admin/css/zTreeStyle/zTreeStyle.css">
<link rel="stylesheet" href="/static/admin/css/jquery.dataTables.min.css">
<body class="gray-bg">
<div id="mycontent" style="width: 10%;height: 100%;display: inline-block;margin: 0 10px;background-color:#fff;">
    <div id="tree_container" class="ztree"></div>
    <p></p>
</div>
<div class="wrapper wrapper-content animated fadeInRight" style="display: inline-block;width: 88%;vertical-align: top;padding: 0;">
    <div class="ibox float-e-margins">
        <div class="ibox-title">
            <h5>用户列表</h5>
        </div>
        <div class="ibox-content">
                <div id="mytable1_wrapper">
                    <table id="admin_table" width="100%" class="table table-striped table-bordered">
                        <thead>
                            <tr>
                                <!--<th>ID</th>-->
                                <th>用户名称</th>
                                <!--<th>头像</th>-->
                                <!--<th>用户角色</th>-->
                                <!--<th>登陆次数</th>-->
                                <!--<th>上次登录ip</th>-->
                                <!--<th>上次登录时间</th>-->
                                <!--<th>真实姓名</th>-->
                                <!--<th>状态</th>-->
                                <!--<th>操作</th>-->
                            </tr>
                        </thead>
                    </table>
                </div>
        </div>
    </div>
</div>

<!-- 加载动画 -->
<div class="spiner-example">
    <div class="sk-spinner sk-spinner-three-bounce">
        <div class="sk-bounce1"></div>
        <div class="sk-bounce2"></div>
        <div class="sk-bounce3"></div>
    </div>
</div>

{include file="public/footer" /}
<script src="__JS__/jquery.ztree.all.js"></script>
<script src="__JS__/jquery.dataTables.min.js"></script>

<script type="text/javascript">
//编辑用户
function userEdit(id){
    location.href = './userEdit/id/'+id+'.html';
}

//删除用户
function userDel(id){
    lunhui.confirm(id,'{:url("userDel")}');
}

//用户状态
function user_state(id){
    lunhui.status(id,'{:url("user_state")}');
}
//组织结构
    var treeNodes;
    $.ajax({
        url: "./getTreeData",
        async: false,
        type:"post",
        dataType:"json",
        success: function (data) {
            console.log(data);
            treeNodes = JSON.parse(data.data);
        }
    })
    var setting = {
        data:{
            simpleData : {
                enable:true,
                idkey: "id",
                pIdKey: "pId"
            }
        },
        callback: {
            onClick: zTreeOnClick
        }
    };
    //点击获取节点名称
    function zTreeOnClick(event, treeId, treeNode) {
        console.log(treeNode.tId + ", " + treeNode.name);
        $("#mycontent>p").text(treeNode.name);
    };
    var zTreeObj = $.fn.zTree.init($("#tree_container"), setting,treeNodes);

 //datatable

$('#admin_table').DataTable( {
    "processing": true,
    "serverSide": true,
    "ajax": "__SCRIPT__/test.php"
} );

</script>
</body>
</html>